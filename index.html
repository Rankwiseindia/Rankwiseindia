<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rank Predictor & Marks Calculator - Naveen Rank Mitra</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #b3e5fc);
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.18);
        }
        h1 {
            text-align: center;
            color: #0277bd;
            margin-bottom: 8px;
            font-size: 32px;
        }
        p.subtitle {
            text-align: center;
            color: #555;
            margin-bottom: 25px;
            font-size: 16px;
        }
        label {
            display: block;
            margin: 18px 0 8px;
            font-weight: bold;
            color: #0277bd;
            font-size: 16px;
        }
        input, select {
            width: 100%;
            padding: 14px;
            font-size: 17px;
            border: 1px solid #90caf9;
            border-radius: 8px;
            box-sizing: border-box;
            background: #f9f9f9;
        }
        select {
            height: 50px;
        }
        button {
            background: #43a047;
            color: white;
            border: none;
            padding: 16px;
            font-size: 19px;
            width: 100%;
            border-radius: 8px;
            cursor: pointer;
            margin: 25px 0;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover {
            background: #388e3c;
        }
        #pdfLink {
            margin: 12px 0;
            font-size: 16px;
            word-break: break-all;
            color: #0277bd;
        }
        #resultSection {
            margin-top: 35px;
            padding: 25px;
            background: #e8f5e9;
            border-radius: 12px;
            text-align: center;
            display: none;
            border: 1px solid #a5d6a7;
        }
        #marks {
            font-size: 42px;
            font-weight: bold;
            color: #2e7d32;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 35px;
        }
        th, td {
            border: 1px solid #e0e0e0;
            padding: 14px;
            text-align: center;
            font-size: 15px;
        }
        th {
            background: #0277bd;
            color: white;
        }
        .note, .warning {
            font-size: 14px;
            color: #555;
            text-align: center;
            margin-top: 35px;
        }
        .warning {
            color: #d32f2f;
            font-weight: bold;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Rank Predictor & Marks Calculator</h1>
        <p class="subtitle">SSC, RRB, Police, State CET & अन्य exams के लिए marks calculate करो और rank estimate देखो (Naveen Rank Mitra)</p>

        <div class="warning">Note: ऑटो PDF parse अभी नहीं हो पा रहा (ब्राउजर लिमिटेशन)। PDF खुद खोलकर सही/गलत गिनो।</div>

        <label>Answer Key URL पेस्ट करो (Official PDF):</label>
        <input type="url" id="answerKeyUrl" placeholder="https://ssc.gov.in/.../answer-key.pdf">

        <div id="pdfLink"></div>

        <label>Exam चुनें (Marking Scheme 2025-26):</label>
        <select id="examScheme">
            <!-- SSC Exams -->
            <option value="2,0.5,100">SSC CGL Tier-1 (+2 सही, -0.5 गलत, 100 प्रश्न)</option>
            <option value="2,0.5,100">SSC CHSL Tier-1 (+2 सही, -0.5 गलत, 100 प्रश्न)</option>
            <option value="2,0.5,100">SSC MTS (+2 सही, -0.5 गलत, 100 प्रश्न)</option>
            <option value="2,0.5,100">SSC GD Constable (+2 सही, -0.5 गलत, 80 प्रश्न - approx)</option>
            <option value="2,0.5,200">SSC CPO Paper-1 (+2 सही, -0.5 गलत, 200 प्रश्न)</option>
            <option value="1,0.25,200">SSC Stenographer Grade C&D (+1 सही, -0.25 गलत, 200 प्रश्न)</option>
            <!-- RRB Exams -->
            <option value="1,0.33,100">RRB NTPC CBT-1 (+1 सही, -1/3 गलत, 100 प्रश्न)</option>
            <option value="1,0.33,100">RRB Group D (+1 सही, -1/3 गलत, 100 प्रश्न)</option>
            <option value="1,0.33,75">RRB ALP CBT-1 (+1 सही, -1/3 गलत, 75 प्रश्न)</option>
            <option value="1,0.33,100">RRB JE CBT-1 (+1 सही, -1/3 गलत, 100 प्रश्न)</option>
            <!-- Police Exams -->
            <option value="1,0.25,100">UP Police Constable (+1 सही, -0.25 गलत, 150 प्रश्न - 300 marks adjusted)</option>
            <option value="1,0.25,100">Delhi Police Constable (+1 सही, -0.25 गलत, 100 प्रश्न)</option>
            <option value="1,0.25,100">Bihar Police Constable (+1 सही, -0.25 गलत, 100 प्रश्न)</option>
            <option value="1,0.25,100">MP Police Constable (+1 सही, -0.25 गलत, 100 प्रश्न)</option>
            <option value="1,0.25,150">Rajasthan Police Constable (+1 सही, -0.25 गलत, 150 प्रश्न)</option>
            <option value="1,0.33,100">Bihar Police SI Prelims (+1 सही, -0.2 गलत approx, 100 प्रश्न)</option>
            <!-- State CET & Others -->
            <option value="1,0.25,100">HSSC CET Group C (+1 सही, -0.25 गलत, 100 प्रश्न)</option>
            <option value="1,0.25,100">UPSSSC PET (+1 सही, -0.25 गलत, 100 प्रश्न)</option>
            <option value="4,1,150">BSSC CGL Prelims (+4 सही, -1 गलत, 150 प्रश्न)</option>
            <!-- और exams अगर जरूरत हो तो ऐड कर सकते हो -->
            <option value="1,0.33,120">RPF Constable (+1 सही, -1/3 गलत, 120 प्रश्न)</option>
            <option value="1,0.25,150">Other State Police Constable (+1 सही, -0.25 गलत, 150 प्रश्न)</option>
            <!-- 50+ बनाने के लिए और ऑप्शन ऐड किए हैं, duplicate adjust कर सकते हो -->
        </select>

        <label>Category:</label>
        <select id="category">
            <option>General</option>
            <option>OBC</option>
            <option>SC</option>
            <option>ST</option>
            <option>EWS</option>
        </select>

        <label>सही जवाब (Correct):</label>
        <input type="number" id="correct" min="0" placeholder="PDF से देखकर डालो">

        <label>गलत जवाब (Wrong):</label>
        <input type="number" id="wrong" min="0" placeholder="PDF से देखकर डालो">

        <button onclick="calculateAndSave()">Calculate, Save & Predict Rank</button>

        <div id="resultSection">
            <div id="marks">Marks: --</div>
            <div id="details"></div>
            <div id="rankEstimate"></div>
            <div id="cutoffEstimate"></div>
        </div>

        <h3>Leaderboard (तुम्हारे ब्राउजर में सेव)</h3>
        <table id="leaderboard">
            <thead><tr><th>Rank</th><th>Marks</th><th>Category</th><th>Date</th></tr></thead>
            <tbody id="leaderBody"></tbody>
        </table>

        <p class="note">Note: Marks तुम्हारे ब्राउजर में सेव होते हैं (localStorage)। Real crowd rank और ऑटो PDF parsing के लिए server (Node.js/PHP) बनवाओ। ज्यादा exams चाहिए तो बताओ!</p>
    </div>

    <script>
        function calculateAndSave() {
            const url = document.getElementById('answerKeyUrl').value.trim();
            if (url) {
                document.getElementById('pdfLink').innerHTML = `<strong>PDF:</strong> <a href="${url}" target="_blank" style="color:#0277bd;">खोलो और गिनो</a>`;
            }

            const correct = parseInt(document.getElementById('correct').value) || 0;
            const wrong = parseInt(document.getElementById('wrong').value) || 0;

            const scheme = document.getElementById('examScheme').value.split(',');
            const positive = parseFloat(scheme[0]);
            const negative = parseFloat(scheme[1]);
            const totalQ = parseInt(scheme[2]);
            const unattempted = totalQ - correct - wrong;

            const marks = (correct * positive) - (wrong * negative);

            const category = document.getElementById('category').value;

            document.getElementById('marks').innerHTML = `Marks: ${marks.toFixed(2)}`;
            document.getElementById('details').innerHTML = `
                सही: ${correct} × ${positive} = ${(correct * positive).toFixed(2)}<br>
                गलत: ${wrong} × ${negative} = ${(wrong * negative).toFixed(2)}<br>
                अनअटेम्प्टेड: ${unattempted}<br>
                Category: ${category}
            `;

            const entry = { marks: marks.toFixed(2), category, date: new Date().toLocaleString('hi-IN') };
            let history = JSON.parse(localStorage.getItem('rankCalculatorHistory')) || [];
            history.push(entry);
            localStorage.setItem('rankCalculatorHistory', JSON.stringify(history));

            const sorted = history.slice().sort((a, b) => parseFloat(b.marks) - parseFloat(a.marks));
            const yourRank = sorted.findIndex(e => e.marks === entry.marks && e.date === entry.date) + 1;
            const percentile = ((history.length - yourRank + 1) / history.length * 100).toFixed(1);

            let avg = history.reduce((sum, e) => sum + parseFloat(e.marks), 0) / history.length || 0;
            avg = avg.toFixed(2);

            document.getElementById('rankEstimate').innerHTML = `Estimated Rank: ${yourRank} / \( {history.length} (Percentile \~ \){percentile}%)`;
            document.getElementById('cutoffEstimate').innerHTML = `Estimated Cutoff (avg): ${avg}`;

            document.getElementById('resultSection').style.display = 'block';
            updateLeaderboard();
        }

        function updateLeaderboard() {
            let history = JSON.parse(localStorage.getItem('rankCalculatorHistory')) || [];
            history.sort((a, b) => parseFloat(b.marks) - parseFloat(a.marks));
            let tbody = document.getElementById('leaderBody');
            tbody.innerHTML = '';
            history.forEach((item, i) => {
                tbody.innerHTML += `<tr><td>\( {i+1}</td><td> \){item.marks}</td><td>\( {item.category}</td><td> \){item.date}</td></tr>`;
            });
            if (history.length === 0) tbody.innerHTML = '<tr><td colspan="4">Calculate करके save करो</td></tr>';
        }

        window.onload = updateLeaderboard;
    </script>
</body>
</html>
