<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rankwise India - SSC/IBPS Rank Predictor</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {background:#f7f8fc; font-family:Arial, sans-serif;}
header {background:#0a3d62; color:#fff; padding:15px 0; text-align:center;}
nav a {color:#fff; margin:0 15px; font-weight:bold; text-decoration:none;}
nav a:hover {text-decoration:underline;}
.section-title {margin:30px 0; font-weight:bold; color:#0a3d62;}
.card-result {margin-top:20px; background:#ffe6e6; border-left:5px solid #e74c3c; padding:20px; border-radius:8px;}
footer {background:#0a3d62; color:#fff; padding:20px; text-align:center;}
</style>
</head>
<body>

<header>
    <h1>Rankwise India</h1>
    <p>SSC / RRB / IBPS Rank Predictor + Marks Calculator</p>
</header>

<section class="container" id="predictor">
    <h2 class="section-title text-center">Rank Predictor</h2>
    <div class="row justify-content-center">
        <div class="col-md-3">
            <input type="number" id="score" class="form-control" placeholder="अपना स्कोर डालें">
        </div>
        <div class="col-md-3">
            <select id="exam" class="form-select">
                <option value="SSC GD">SSC GD</option>
                <option value="SSC CGL">SSC CGL</option>
                <option value="RRB Group D">RRB Group D</option>
                <option value="IBPS PO">IBPS PO</option>
            </select>
        </div>
        <div class="col-md-3">
            <select id="category" class="form-select">
                <option value="GEN">General</option>
                <option value="OBC">OBC</option>
                <option value="EWS">EWS</option>
                <option value="SC">SC</option>
                <option value="ST">ST</option>
            </select>
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary w-100" onclick="predictRank()">Predict</button>
        </div>
    </div>

    <div id="result" class="card-result text-center"></div>
</section>

<hr>

<section class="container mt-4">
    <h2 class="section-title text-center">Answer Key HTML Upload Marks Calculator</h2>
    <div class="row justify-content-center">
        <div class="col-md-6">
            <input type="file" id="htmlFile" class="form-control">
            <button class="btn btn-success w-100 mt-2" onclick="calculateFromHTML()">Upload & Calculate Marks</button>
        </div>
    </div>
</section>

<footer>
    <p>© 2026 Rankwise India | Designed by Yatendra Kumar</p>
</footer>

<script>

function predictRank(){
    let score = parseFloat(document.getElementById('score').value);
    let category = document.getElementById('category').value;
    let exam = document.getElementById('exam').value;

    if(isNaN(score)){
        document.getElementById('result').innerHTML = "कृपया सही स्कोर डालें।";
        return;
    }

    let totalCandidates = 2000000;
    if(exam === "SSC GD") totalCandidates = 3000000;
    if(exam === "SSC CGL") totalCandidates = 1500000;
    if(exam === "IBPS PO") totalCandidates = 800000;

    let percentile = (score / 150) * 100;
    if(percentile > 100) percentile = 100;

    let predictedRank = Math.round(totalCandidates - (percentile/100) * totalCandidates);

    if(category === "OBC") predictedRank -= 5000;
    if(category === "EWS") predictedRank -= 7000;
    if(category === "SC") predictedRank -= 12000;
    if(category === "ST") predictedRank -= 15000;

    if(predictedRank < 1) predictedRank = 1;

    let cutoff = 0;
    if(exam === "RRB Group D"){
        if(category === "GEN") cutoff = 120;
        if(category === "OBC") cutoff = 115;
        if(category === "EWS") cutoff = 110;
        if(category === "SC") cutoff = 100;
        if(category === "ST") cutoff = 95;
    }

    let status = score >= cutoff ? "✅ Cutoff के ऊपर" : "❌ Cutoff से नीचे";

    document.getElementById('result').innerHTML = `
        <h4>अनुमानित रैंक: ${predictedRank.toLocaleString()}</h4>
        <p>Percentile: ${percentile.toFixed(2)}%</p>
        <p>Expected Cutoff: ${cutoff}</p>
        <p>Status: ${status}</p>
    `;
}

function calculateFromHTML(){
    const fileInput = document.getElementById('htmlFile');
    const file = fileInput.files[0];

    if(!file){
        alert("कृपया HTML file चुनें।");
        return;
    }

    const reader = new FileReader();

    reader.onload = function(e){
        const parser = new DOMParser();
        const doc = parser.parseFromString(e.target.result, "text/html");

        let correctAnswers = doc.querySelectorAll(".correctAnswer");
        let selectedAnswers = doc.querySelectorAll(".selectedAnswer");

        let right = 0;
        let wrong = 0;

        for(let i=0; i<correctAnswers.length; i++){
            if(selectedAnswers[i]){
                if(correctAnswers[i].innerText.trim() === selectedAnswers[i].innerText.trim()){
                    right++;
                } else {
                    wrong++;
                }
            }
        }

        let score = right - (wrong * 0.33);

        document.getElementById('result').innerHTML = `
            <h4>Right: ${right}</h4>
            <h4>Wrong: ${wrong}</h4>
            <h4>Final Score: ${score.toFixed(2)}</h4>
        `;
    };

    reader.readAsText(file);
}

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
